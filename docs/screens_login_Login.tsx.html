<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: screens/login/Login.tsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: screens/login/Login.tsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { observer } from 'mobx-react-lite'
import React, { useContext, useEffect, useState } from 'react'
import { Context } from '../../../index.tsx'
import UserService from '../../../services/user.service.ts'
import { IUser } from '../../../types/User.ts'
import Footer from '../home/elements/Footer/Footer.tsx'
import Header from '../home/elements/Header/Header.tsx'
import styles from './Login.module.css'
import LoginForm from './LoginForm/LoginForm.tsx'

/**
 * Сторінка логіну з підтримкою MobX (авторизація, перевірка токена, отримання користувачів).
 *
 * В залежності від стану:
 * - показує форму логіну (якщо не авторизовано),
 * - або профіль користувача з можливістю логауту та завантаженням списку користувачів.
 *
 * @component
 * @returns {JSX.Element}
 *
 * @example
 * return &lt;Login />
 */
const Login = observer(() => {
	const { store } = useContext(Context)

	/** Локальний стан для збереження списку користувачів */
	const [users, setUsers] = useState&lt;Array&lt;IUser>>([])

	/**
	 * При монтуванні компонента перевіряє наявність токена і,
	 * якщо він є — викликає авторизацію через MobX store.
	 */
	useEffect(() => {
		if (localStorage.getItem('token')) store.checkAuth()
	}, [store])

	/**
	 * Асинхронна функція для отримання списку користувачів.
	 * Встановлює відповідь у локальний стан.
	 */
	async function getUsers() {
		try {
			const response = await UserService.fetchUsers()
			setUsers(response.data)
		} catch (e) {
			console.log(e)
		}
	}

	// Якщо store не доступний (edge case)
	if (!store) return &lt;div>Error: Store is not available&lt;/div>

	// Поки триває перевірка токена / авторизації
	if (store.isLoading) return &lt;div>Loading...&lt;/div>

	// Якщо користувач не авторизований — показуємо форму входу
	if (!store.isAuth)
		return (
			&lt;>
				&lt;Header />
				&lt;LoginForm />
				&lt;Footer />
			&lt;/>
		)

	// Якщо користувач авторизований — показуємо дані користувача
	return (
		&lt;>
			&lt;Header />
			&lt;div className={styles.container}>
				&lt;div>
					{/* Email користувача */}
					&lt;h1 className={styles.username}>
						{`User is authorized ${store.user.email}`}
					&lt;/h1>

					{/* Статус активації акаунта */}
					&lt;h1 className={styles.status}>
						{store.user.isActivated
							? 'Account is activated'
							: 'ACTIVATE YOUR ACCOUNT'}
					&lt;/h1>

					{/* Кнопки: Logout і Get Users */}
					&lt;div className={styles.buttonContainer}>
						&lt;button className={styles.logout} onClick={() => store.logout()}>
							Logout
						&lt;/button>
						&lt;button className={styles.getUsers} onClick={getUsers}>
							Get users
						&lt;/button>
					&lt;/div>

					{/* Виведення списку користувачів */}
					{users.map(user => (
						&lt;div className={styles.user} key={user.email}>
							{user.email}
						&lt;/div>
					))}
				&lt;/div>
			&lt;/div>
			&lt;Footer />
		&lt;/>
	)
})

export default Login
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Login">Login</a></li><li><a href="global.html#router">router</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Apr 15 2025 23:18:28 GMT+0300 (за східноєвропейським літнім часом)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
